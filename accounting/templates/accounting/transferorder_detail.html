{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container accounting">

    <h1>Ordre de virement</h1>

    <table class="table table-striped table-hover">
        <tr>
            <th>Titulaire</th>
            <th>IBAN</th>
            <th>BIC</th>
            <th>Commentaire</th>
            <th class="text-right">Montant</th>
        </tr>
        {% for transaction in object.transaction_set.all %}
            {% if transaction.expense %}
                <tr>
                    <td>{{ transaction.account.title }}</td>
                    <td>{{ transaction.account.thirdpartyaccount.iban }}</td>
                    <td>{{ transaction.account.thirdpartyaccount.bic }}</td>
                    <td>{{ transaction.title }}</td>
                    <td class="text-right text-nowrap">{{ transaction.expense|floatformat:2 }} €</td>
                </tr>
            {% endif %}
        {% endfor %}
        <tr>
            <td><strong>Total</strong></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-right text-nowrap"><strong>{{ expense|floatformat:2 }} €</strong></td>
        </tr>
    </table>

    <p>
        <a href="{% url 'accounting:transferorder_download' object.pk %}" class="btn btn-primary">
            <span class="glyphicon glyphicon-download"></span>
            Télécharger le fichier SEPA
        </a>
        {% if perms.accounting.change_transactionorder %}
            <a href="{% url 'admin:accounting_transferorder_change' object.pk %}" class="btn btn-primary">
                <span class="glyphicon glyphicon-edit"></span>
                Modifier
            </a>
        {% endif %}
    </p>

</div>

{% endblock content %}
